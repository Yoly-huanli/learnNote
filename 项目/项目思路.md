[toc]

# 1.内嵌H5的性能优化

+ 预加载
+ 离线包：提前缓存jingt
+ trans
+ 图片资源优化

H5页面加载过程

用户点击url-->创建webview-->加载前端资源-->加载内容资源-->页面渲染

native加载过程

用户点击url-->加载框架资源-->加载内容资源-->页面渲染

## 如何减少内容资源加载时间

请求的过程：当我们执行接口请求的时候，实际上可能会经过队列等待、建立连接、发送请求、服务端延迟、服务端响应等环节，这些环节都有可能拖慢整体速度。整个页面首屏加载最耗时的环节是接口数据获取，而接口数据获取过程中最耗时的环节是服务端响应和数据传输。

业界常见的优化接口数据获取环节时长方案为接口预请求，借助客户端把接口请求时机提前，让我们H5页面尽快拿到接口数据进行渲染，从而减少骨架屏等待时间。

H5页面加载过程整体变更为：

同步： 用户点击url-->创建webview-->加载前端资源            --->页面渲染

​             加载内容资源

但是内容资源加载的时间还是比用户点击url-->创建webview-->加载前端资源长，怎么处理？首屏数据拆分

## 如何提前客户端预先请求

https://i.xiaojukeji.com/way/article/12922152

1. 那些接口需要预请求，参数有什么？==》cdn下发，客户端和H5竞速

2. 客户端请求接口结果怎么给H5？ ==》

   1. webview 触发“onLoad ”事件后，把数据注入到 window 对象下，H5通过 Object.defineProperty 进行监听
   2. 通过JSBrigde去获取APP的请求数据结果

3. H5如何接收数据： 进入H5页面了，但是客户端没有请求结果，pending状态，那么启动H5自身的请求，进行请求竞速

   