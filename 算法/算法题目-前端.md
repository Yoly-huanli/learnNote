[toc]

# 1.new发生了什么

new就是通过构造函数创建了一个实例，它可以使用原型上的方法，并且执行了构造函数里的赋值操作，把自己的值传递了过去，那么构造函数，原型，实现了什么

+ 1.执行this,创建变量，这样每个实例单独拥有自己的变量

  ```
  function MyProto = function(age,name){
     this.name = name
     this.age = age
  }
  ```

+ 2.在原型上创建函数，避免重复创建

  ```
  MyProto.prototype.getName = function(){
    return this.name
  }
  ```

因此new主要也实现两个功能，一个是继承了构造函数的原型，另一个是执行了构造函数

```js
//构造函数及原型
function MyProto(name){
      this.name = name
}
MyProto.prototype.getName = function(){
    return this.name
}
//自定义的new方法 
function Mynew(){
    let fn=Array.prototype.shift.call(arguments);
    let obj = Object.create(fn.prototype)
    //obj.__proto__=fn.prototype;
    fn.apply(obj,arguments);
    return obj
}

//执行验证
const test = MyNew(MyProto,'yoly')
console.log('MyNew',test.getName())
```

## Object.create和{}的区别

+ {}创建的是空对象，原型指向Object.prototype
+ Object.create创建的也是空对象，原型指向传入的值





