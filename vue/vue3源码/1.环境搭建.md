[toc]

# 搭建学习环境

+ 初始化项目

  ```
  npm init -y
  ```

+ ts安装

  ```
   npm install typescript -D
  //生成tsconfig.json文件
   npx tsc --init 
  ```

+ jest安装

  ```
  npm install --save-dev jest
  npm install --save-dev --dev @types/jest
  ```

  配置启动命令

  ```
  //package.json
  "scripts": {
      "test": "jest"
   },
  ```

  ts适配

  ```
  //tsconfig.json里
   "types": ["jest"], 
  ```

  测试一下

  ```tsx
  //新建index.ts文件
  function sum(a, b) {
    return a + b;
  }
  module.exports = sum;
  // 新建index.test.ts文件
  const sum = require('./../index');
  test('adds 1 + 2 to equal 3', () => {
    expect(sum(1, 2)).toBe(3);
  });
  //启动运行
  npm run test
  //结果
  src/reactivity/test/index.test.ts
    ✓ adds 1 + 2 to equal 3 (1 ms)
  
  Test Suites: 1 passed, 1 total
  Tests:       1 passed, 1 total
  Snapshots:   0 total
  Time:        0.27 s
  ```

+ 适配es6语法:改写例子

  ```tsx
  //新建index.ts文件
  export function sum(a, b) {
    return a + b;
  }
  // 新建index.test.ts文件
  import {sum} from './../index';
  test('adds 1 + 2 to equal 3', () => {
    expect(sum(1, 2)).toBe(3);
  });
  ```

  安装es6解析依赖

  ```
  npm i --dev babel-jest @babel/core @babel/preset-env
  ```

  新建babel.config.js

  ```
  module.exports = {
    presets: [['@babel/preset-env', {targets: {node: 'current'}}]],
  };
  ```

+ es6语法的基础上支持ts

  ```
  npm i --dev @babel/preset-typescript
  ```

  babel.config.js

  ```
  module.exports = {
    presets: [
      ['@babel/preset-env', {targets: {node: 'current'}}],
      '@babel/preset-typescript',
    ],
  };
  ```

+ ts其他配置

  ```
  //tsconfig.json
  "lib": ["DOM","ES6"],  //ts支持DOM操作和ES6
  ```



# 参考

https://juejin.cn/post/7028771190416080933

https://github.com/cuixiaorui/mini-vue

https://www.bilibili.com/video/BV1R341177P7?spm_id_from=333.999.0.0