[toc]

# vite是什么

快速的， 是一种前端的新型的构建工具，能显著提高前端的开发体验，主要功能分为两个部分，是基于`esbuild`和`rollup`实现的

+ 开发服务器：基于原生的ES模块，提供了丰富的内建功能， 比如模块热更新
+ 一套构建指令：基于rollup快速构建静态资源

# Vite相比于Webpack哪些方面更好

## 背景

浏览器支持ES模块之前， js没有提供原生机制进行模块开发， 只能通过node服务器的require进行模块化，而本地开发的时候，都是先打包本地文件，进行文件转化与依赖关系分析，再启动本地开发服务器来运行的

## 开发服务器的启动

从以下两个方面提升性能

+ 依赖打包：通过esbuild进行打包，go语言编写的esbuild与js打包工具快
+ 源码打包：通过浏览器原生的es模块提供源码，浏览器承担了打包工具的部分工作

## 热更新

热更新方面的优化

+ 使用ES模块在更新的时候不需要重新构建整个项目，不需要重新分析一老关系
+ 可以使用浏览器的缓存

# Vite的热更新原理是什么

1. Vite本地启动时会创建一个`WebSocket`连接，同时去监听本地的文件变化
2. 当用户修改了本地的文件时，`WebSocket`的服务端会拿到变化的文件的`ID`或者其他标识，并推送给客户端
3. 客户端获取到变化的文件信息之后，便去请求最新的文件并刷新页面

http://wiki.intra.xiaojukeji.com/pages/viewpage.action?pageId=889332668